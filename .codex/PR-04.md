---
id: PR-04
track: 0.6-unified
depends_on: [PR-03]
---

# PR-04: Core contracts 0.6.0 (types-core + envelope + i18n-first)

## Goal
Ship the canonical 0.6.0 core types and protocol envelope, CBOR-first.

## Contract packages (all @0.6.0)
- `greentic:types-core@0.6.0`
- `greentic:codec@0.6.0` (optional helpers)
- `greentic:component/component@0.6.0`

## Requirements
- tenant ctx includes i18n identity linkage (`i18n_id`) and common tracing ids
- envelope uses CBOR bytes: `payload_cbor`, `metadata_cbor`
- call spec is separate from envelope (flows never embed ctx)
- deterministic field ordering + stable hashing guidance

## Deliverables
- WIT definitions for the above packages/world.
- CDDL schemas for envelope and descriptor structs.
- Update lints allowlists for canonical packages.
- Add consumer compile gate: host/guest bindings + greentic-types compile against 0.6 WIT

## Acceptance criteria
- WIT compiles and can be consumed by bindgen
- tenant ctx unique to the 0.6.0 line (defined in types-core) and imported elsewhere
- schemas exist and hash-stable
