---
id: PR-07
track: 0.6-unified
depends_on: [PR-06]
---

# PR-07: Deterministic migration tool (any version -> 0.6.0)

## Goal
Provide a deterministic, repeatable migration tool that:
- upgrades WIT package references to 0.6.0
- rewrites manifests/flows to CallSpec (no embedded envelopes)
- converts JSON payload authoring to CBOR using schema refs
- emits a lossiness report

## Deliverables
- `greentic-migrate` (or subcommand in existing tooling) that supports:
  - `scan` (inventory current versions)
  - `plan` (shows proposed mapping based on CANONICAL_MAP.md)
  - `apply` (writes upgraded artifacts)
- Report file: `migration_report.json` with stable ordering

## Acceptance criteria
- Running migrate twice yields byte-identical outputs (deterministic)
- Produces clear report for any lossy conversions
- Covers packs/flows/components manifests at minimum

