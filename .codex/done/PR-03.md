# PR-03.md (greentic-interfaces)
# Title: Freeze legacy domain-provider WIT worlds and remove from default guest surface

## Goal
Stop further growth of typed domain-provider contracts (messaging/events/secrets providers) by:
- removing them from default guest feature set
- documenting a hard rule: new providers must use provider-core + schemas

## Non-goals
- Do not delete legacy worlds yet.
- Do not change runtime behavior.

## Tasks
1. **Inventory document**
   - Add `docs/interfaces_inventory.md`:
     - categorize worlds as:
       - platform-base
       - provider-core (keep)
       - legacy provider-protocol (frozen)
       - unrelated (gui, distributor-api, supply-chain, etc.)
2. **Deprecation banners**
   - For each legacy provider-protocol WIT world file(s):
     - add header comment: deprecated/frozen
     - point to: `greentic:provider/schema-core@1.0.0`
3. **Feature gates**
   - `crates/greentic-interfaces-guest`:
     - default feature set should NOT include legacy provider-protocol worlds
     - add opt-in features:
       - `legacy-messaging-provider-protocol`
       - `legacy-events-provider-protocol`
       - `legacy-secrets-provider-protocol`
4. **Host surface**
   - `crates/greentic-interfaces-host`:
     - keep legacy modules accessible only behind the same legacy features (off by default)
5. **CI compile tests**
   - Add two compile-only jobs/tests:
     - default features (no legacy) must compile
     - legacy feature set must still compile (temporary until removal PR)

## Acceptance criteria
- Default guest builds no longer expose legacy provider-protocol worlds.
- Docs clearly state provider-core is the only supported future path.
- CI verifies both default and legacy builds compile.

## Notes for Codex
- Do not rename existing modules yet; only gate and document.
- Keep the migration window short; removal happens after provider migration PRs land.
